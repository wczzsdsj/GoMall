# version: '3'
services:
  mysql:
    image: 'mysql:latest'
    ports:
      - 3306:3306
    environment:
      - MYSQL_DATABASE=user
      - MYSQL_ROOT_PASSWORD=root
  redis:
    image: 'redis:latest'
    ports:
      - 6379:6379
  # consul:
  #  image: "hashicorp/consul:latest"
  #  ports:
  #   - 8500:8500
#   namesrv:
#     image: apache/rocketmq:5.3.1
#     container_name: rmqnamesrv
#     ports:
#       - 9876:9876
#     networks:
#       - rocketmq
#     command: sh mqnamesrv
#   broker:
#     image: apache/rocketmq:5.3.1
#     container_name: rmqbroker
#     ports:
#       - 10909:10909
#       - 10911:10911
#       - 10912:10912
#     environment:
#       - NAMESRV_ADDR=rmqnamesrv:9876
#     depends_on:
#       - namesrv
#     networks:
#       - rocketmq
#     command: sh mqbroker
#   proxy:
#     image: apache/rocketmq:5.3.1
#     container_name: rmqproxy
#     networks:
#       - rocketmq
#     depends_on:
#       - broker
#       - namesrv
#     ports:
#       - 9090:9090
#       - 9091:9091
#     restart: on-failure
#     environment:
#       - NAMESRV_ADDR=rmqnamesrv:9876
#     command: sh mqproxy
  rocketmq-console:
    image: styletang/rocketmq-console-ng:latest
    container_name: rmqconsole
    ports:
      - 8030:8080
    environment:
      - JAVA_OPTS=-Drocketmq.console.http.port=8080
#     depends_on:
#       - namesrv
#       - broker
#     networks:
#       - rocketmq
# networks:
#   rocketmq:
#     driver: bridge

#   namesrv:
#     image: apache/rocketmq:4.9.6
#     container_name: rmqnamesrv
#     ports:
#       - 9876:9876
#     # networks:
#     #   - rocketmq
#     command: sh mqnamesrv

#   broker:
#     image: apache/rocketmq:4.9.6
#     container_name: rmqbroker
#     ports:
#       - 10909:10909
#       - 10911:10911
#       - 10912:10912
#     environment:
#       - NAMESRV_ADDR=rmqnamesrv:9876
#     volumes:
#       - ./broker.conf:/home/rocketmq/rocketmq-4.9.6/conf/broker.conf
#     depends_on:
#       - namesrv
#     # networks:
#     #   - rocketmq
#     command: sh mqbroker -c /home/rocketmq/rocketmq-4.9.6/conf/broker.conf
#   rocketmq-console:
#     image: styletang/rocketmq-console-ng:latest
#     container_name: rmqconsole
#     ports:
#       - 8030:8080
#     environment:
#       - JAVA_OPTS=-Drocketmq.console.http.port=8080
#     depends_on:
#       - namesrv
#       - broker
#     # networks:
#     #   - rocketmq
# # networks:
# #   rocketmq:
# #     driver: bridge